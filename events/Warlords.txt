namespace = cyrodiil_warlords

# NOTE: "winwars" command cannot be used to test these because
# all it does is give you 100% warscore. It does NOT give the
# other war participant negative warscore!

# TODO: Debug event to instantly occupy enemy?
# TODO: Determine whether or not to base it on ROOT warscore instead
# TODO: Force war against emperor? (Must be bordering emperor by sea zone?)
# TODO: Forced AI wars

# Warlord v. Warlord
country_event = {
	id = cyrodiil_warlords.1
	title = "cyrodiil_warlords.1.t"
	desc = "cyrodiil_warlords.1.d"
	picture = COURT_eventPicture
	hidden = no
	
	trigger = {
		NOT = { has_global_flag = stormcrown_interregnum_ended }
		is_in_war = { attacker_leader = ROOT }
		government = cyrodilic_warlord
		any_country = {
			government = cyrodilic_warlord
			defensive_war_with = ROOT
			NOT = {
				war_score_against = {
					who = ROOT
					value = -35
				}
			}
		}
	}
	
	option = {
		name = "cyrodiil_warlords.1.a"
		every_country = {
			limit = {
				government = cyrodilic_warlord
				defensive_war_with = ROOT
				NOT = {
					war_score_against = {
						who = ROOT
						value = -35
					}
				}
			}
			every_owned_province = {
				cede_province = ROOT
				add_core = ROOT
			}
		}
		add_manpower = 7.5
		add_treasury = 75
	}
}

# Warlord v. County
country_event = {
	id = cyrodiil_warlords.2
	title = "cyrodiil_warlords.2.t"
	desc = "cyrodiil_warlords.2.d"
	picture = COURT_eventPicture
	hidden = no
	
	trigger = {
		NOT = { has_global_flag = stormcrown_interregnum_ended }
		is_in_war = { attacker_leader = ROOT }
		government = cyrodilic_warlord
		any_country = {
			has_country_flag = cyrodilic_count
			defensive_war_with = ROOT
			NOT = {
				war_score_against = {
					who = ROOT
					value = -75
				}
			}
		}
	}
	
	option = {
		name = "cyrodiil_warlords.2.a"
		every_country = {
			limit = {
				has_country_flag = cyrodilic_count
				defensive_war_with = ROOT
				NOT = {
					war_score_against = {
						who = ROOT
						value = -75
					}
				}
			}
			every_owned_province = {
				cede_province = ROOT
				add_core = ROOT
			}
		}
		add_manpower = 10
		add_treasury = 150
	}
}

# Warlord v. other Cyrodilic
country_event = {
	id = cyrodiil_warlords.3
	title = "cyrodiil_warlords.3.t"
	desc = "cyrodiil_warlords.3.d"
	picture = COURT_eventPicture
	hidden = no
	
	trigger = {
		NOT = { has_global_flag = stormcrown_interregnum_ended }
		is_in_war = { attacker_leader = ROOT }
		government = cyrodilic_warlord
		any_country = {
			NOT = { has_country_flag = cyrodilic_count }
			NOT = { government = cyrodilic_warlord }
			NOT = { tag = Y55 }
			OR = {
				culture_group = cyrodillic
				culture_group = colovian
			}
			defensive_war_with = ROOT
			NOT = {
				war_score_against = {
					who = ROOT
					value = -50
				}
			}
		}
	}
	
	option = {
		name = "cyrodiil_warlords.3.a"
		every_country = {
			limit = {
				NOT = { has_country_flag = cyrodilic_count }
				NOT = { government = cyrodilic_warlord }
				OR = {
					culture_group = cyrodillic
					culture_group = colovian
				}
				defensive_war_with = ROOT
				NOT = {
					war_score_against = {
						who = ROOT
						value = -50
					}
				}
			}
			every_owned_province = {
				cede_province = ROOT
				add_core = ROOT
			}
		}
		add_manpower = 5
		add_treasury = 50
	}
}

# Artificial Warlord Agression
country_event = {
	id = cyrodiil_warlords.4
	title = "cyrodiil_warlords.4.t"
	desc = "cyrodiil_warlords.4.d"
	picture = COURT_eventPicture
	hidden = no
	
	trigger = {
		is_at_war = no
		government = cyrodilic_warlord
		num_of_rebel_armies = 0
		army_size_percentage = 0.9
		every_owned_province = {
			is_core = ROOT
		}
		any_neighbor_country = {
			is_vassal = no
			NOT = { war_with = ROOT }
			NOT = { alliance_with = ROOT }
			NOT = { has_truce = ROOT }
			OR = {
				culture_group = cyrodillic
				culture_group = colovian
				AND = {
					culture = dagoni
					government = cyrodilic_warlord
				}
			}
			OR = {
				# Small and vunlerable
				AND = {
					NOT = { army_size = ROOT }
					num_of_allies = 0
				}
				
				# Potentially larger and vulnerable
				AND = {
					is_at_war = yes
					NOT = { war_score = -15 }
					num_of_allies = 0
				}
				
				# KILL THE EMPEROR!
				AND = {
					has_country_flag = ruby_throne
				}
			}
		}
	}
	
	option = {
		name = "cyrodiil_warlords.4.a"
		random_neighbor_country = {
			limit = {
				is_vassal = no
				NOT = { war_with = ROOT }
				NOT = { alliance_with = ROOT }
				NOT = { has_truce = ROOT }
				OR = {
					culture_group = cyrodillic
					culture_group = colovian
					AND = {
						culture = dagoni
						government = cyrodilic_warlord
					}
				}
				OR = {
					# Small and vunlerable
					AND = {
						NOT = { army_size = ROOT }
						num_of_allies = 0
					}
					
					# Potentially larger and vulnerable
					AND = {
						is_at_war = yes
						NOT = { war_score = -15 }
						num_of_allies = 0
					}
					
					# KILL THE EMPEROR!
					AND = {
						has_country_flag = ruby_throne
					}
				}
			}
			ROOT = {
				declare_war_with_cb = {
					who = PREV
					casus_belli = cb_warlord_expansion
				}
			}
		}
	}
}
