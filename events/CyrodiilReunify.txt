namespace = cyrodiil_reunify

#Losing the Ruby Throne
country_event = {
	id = cyrodiil_reunify.19
	title = "cyrodiil_reunify.EVTNAME19"
	desc = "cyrodiil_reunify.EVTDESC19"
	picture = COURT_eventPicture
	hidden = yes

	trigger = {
		has_country_flag = ruby_throne
			NOT = {
			owns_core_province = 3529
			}
		}
	option = {
		name = "cyrodiil_reunify.EVTOPTA19"
		FROM = { country_event = { id = cyrodiil_reunify.20 } }
		}
}
	
country_event = {
	id = cyrodiil_reunify.20
	title = "cyrodiil_reunify.EVTNAME20"
	desc = "cyrodiil_reunify.EVTDESC20"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
		
	option = {
		name = "cyrodiil_reunify.EVTOPTA20"
		clr_country_flag = ruby_throne
		clr_country_flag = took_heartlands
		clr_country_flag = took_anvil
		clr_country_flag = took_kvatch
		clr_country_flag = took_leyawiin
		clr_country_flag = took_bruma
		clr_country_flag = took_bravil
		clr_country_flag = took_cheydinhal
		clr_country_flag = took_chorrol
		clr_country_flag = took_skingrad
		clr_country_flag = cyrodiil_count_opinion
		clr_country_flag = cyrodiil_warlord_emperor_opinion
		
		every_province= {
			limit = {
				superregion = cyrodiil_superregion
			}
			remove_claim = ROOT
		}
		
		every_country = {
			limit = { has_country_flag = cyrodilic_count }
			remove_opinion = {
				who = FROM
				modifier = cyrodiil_count_emperor
			}
		}
		
		every_country = {
			limit = {
				government = cyrodilic_warlord
				NOT = {
					has_country_flag = ruby_throne
				}
			}
			remove_opinion = {
				who = FROM
				modifier = cyrodiil_warlord_other_opinion
			}
		}
	}
}

#Taking over the City Isle (1st war only)
province_event = {
	id = cyrodiil_reunify.21
	title = "cyrodiil_reunify.EVTNAME21"
	desc = "cyrodiil_reunify.EVTDESC21"
	picture = COURT_eventPicture
	hidden = yes

	trigger = {
		province_id = 3529
		owned_by = Y01
		NOT = { controlled_by = owner }
		NOT = { controlled_by = REB }
		has_siege = no
	}

	option = {
		name = "cyrodiil_reunify.EVTOPTA21"
		controller = { country_event = { id = cyrodiil_reunify.22 } }
	}
}
	
country_event = {
	id = cyrodiil_reunify.22
	title = "cyrodiil_reunify.EVTNAME22"
	desc = "cyrodiil_reunify.EVTDESC22"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
		
	option = {
		name = "cyrodiil_reunify.EVTOPTA22"
		every_province = {
		limit = { area = city_isle_area }
		cede_province = ROOT 
		add_core = ROOT
		remove_core = Y01
		}
	}
}

#Establishing Legitimacy as the new Emperor of Cyrodiil
country_event = {
	id = cyrodiil_reunify.23
	title = "cyrodiil_reunify.EVTNAME23"
	desc = "cyrodiil_reunify.EVTDESC23"
	picture = COURT_eventPicture
	
	trigger = {
		has_country_flag = ruby_throne
		legitimacy = 70
		num_of_cities = 25
		NOT = { has_country_flag = unified_empire }
		NOT = { has_country_flag = cyrodiil_legitimacy_established }
		NOT = { is_at_war = yes }
		NOT = { is_subject = yes }
	}
	
	mean_time_to_happen = {
		months = 60
	}

	option = {
		name = "cyrodiil_reunify.EVTOPTA23" 
		set_country_flag = cyrodiil_legitimacy_established
	}
}

#Counties and Towns choose whether to join the Empire or not based on relations
country_event = {
	id = cyrodiil_reunify.24
	title = "cyrodiil_reunify.EVTNAME24"
	desc = "cyrodiil_reunify.EVTDESC24"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
		
	option = {
		name = "cyrodiil_reunify.EVTOPTA24"
		ai_chance = {
			factor = 0
			
			modifier = {
				factor = 100
				has_opinion = { who = FROM value = 100 }
			}
		}
	every_province = {
		limit = {
			owned_by = ROOT
	}
	cede_province = FROM
	add_core = FROM
	FROM = { country_event = { id = cyrodiil_reunify.25 } }
	}
}
	
	option = {
		name = "cyrodiil_reunify.EVTOPTB24"
		ai_chance = {
			factor = 0
			
			modifier = {
				factor = 100
				NOT = { has_opinion = { who = FROM value = 100 } }
			}
			
			modifier = {
				factor = 100
				government_rank = 3
			}
			
			modifier = {
				factor = 100
				religion = nine_divines
				FROM = { religion = daedra_worship }
			}
			
			modifier = {
				factor = 100
				religion = daedra_worship
				FROM = { religion = nine_divines }
			}
		}
		FROM = { country_event = { id = cyrodiil_reunify.26 } }
	}
}

#Event notifying the Empire that the country chose to join the Empire
country_event = {
	id = cyrodiil_reunify.25
	title = "cyrodiil_reunify.EVTNAME25"
	desc = "cyrodiil_reunify.EVTDESC25"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
		
	option = {
		name = "cyrodiil_reunify.EVTOPTA25"
	}
}

#Event notifying the Empire that the country declined to join the Empire
country_event = {
	id = cyrodiil_reunify.26
	title = "cyrodiil_reunify.EVTNAME26"
	desc = "cyrodiil_reunify.EVTDESC26"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
		
	option = {
		name = "cyrodiil_reunify.EVTOPTA26"
	}
}